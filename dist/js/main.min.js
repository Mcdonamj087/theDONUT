/*! donut-website v0.0.1 | (c) 2020  | MIT License | http://link-to-your-git-repo.com */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Accordion=(function(){function e(t){var n=this;_classCallCheck(this,e),this.instance=t,this.question=this.instance.querySelector(".question"),this.answer=this.instance.querySelector(".answer"),this.question.addEventListener("click",(function(){"true"==n.instance.getAttribute("data-expanded")?(n.collapse(),console.log("collapse")):(n.expand(),console.log("expand"))})),this.instance.addEventListener("transitionend",(function(e){"height"===e.propertyName&&("true"===n.instance.dataset.expanded?(console.log("expanding finished"),n.instance.style.height="auto"):(console.log("collapsing finished"),n.answer.style.display="none",requestAnimationFrame((function(){n.instance.style.height="auto"}))))}))}return _createClass(e,[{key:"init",value:function(){"false"===this.instance.getAttribute("data-expanded")?(this.instance.style.height="".concat(this.question.scrollHeight,"px"),this.answer.style.display="none"):this.instance.classList.add("is-open")}},{key:"expand",value:function(){var e=this;this.answer.style.display="block",this.instance.style.height="".concat(this.question.scrollHeight,"px"),requestAnimationFrame((function(){e.instance.style.height="".concat(e.instance.scrollHeight,"px")})),this.instance.classList.add("is-open"),this.instance.dataset.expanded="true"}},{key:"collapse",value:function(){var e=this;this.instance.style.height="".concat(this.instance.scrollHeight,"px"),requestAnimationFrame((function(){e.instance.style.height="".concat(e.question.scrollHeight,"px")})),this.instance.classList.remove("is-open"),this.instance.dataset.expanded="false"}}]),e})(),accordions=document.querySelectorAll(".accordion");accordions.length&&accordions.forEach((function(e){new Accordion(e).init()}));var header=document.querySelector("header"),hamburger=document.getElementById("hamburger"),headerCTA=document.getElementById("header-subscribe"),mobileNavWrapper=document.querySelector(".mobile-menu-wrapper"),newslettersMenuTrigger=document.querySelector(".mobile-menu.main .nav-item.newsletters"),menuBack=document.querySelectorAll("header .menu-back"),newsletterNavItems=document.querySelectorAll(".mobile-menu.newsletters .nav-item"),megaMenuTabs=document.querySelectorAll(".mega-menu--tabs .tab"),megaMenuMains=document.querySelectorAll(".mega-menu--main .main"),body=document.body;if(header){var normalize=function(){mq.matches&&body.classList.contains("mobile-nav-is-open")&&(body.classList.remove("mobile-nav-is-open"),body.classList.remove("menu-level-2"),body.classList.remove("menu-level-3"),megaMenuTabs.forEach((function(e,t,n){0===t?e.classList.add("active"):e.classList.remove("active"),t===n.length-1&&(console.log(e.parentElement),e.parentElement.parentElement.nextElementSibling.dataset.active="daily")})),megaMenuMains.forEach((function(e,t){e.classList.remove("active")})),megaMenuMains[0].classList.add("active"),bodyScrollLock.enableBodyScroll(mobileNavWrapper)),mq.matches||header.classList.remove("form-active")},isMobileNavVisible=function(e){return!!e.classList.contains("mobile-nav-is-open")};newslettersMenuTrigger.addEventListener("click",(function(e){body.classList.add("menu-level-2")})),menuBack.forEach((function(e){return e.addEventListener("click",(function(e){body.classList.contains("menu-level-2")?body.classList.remove("menu-level-2"):body.classList.contains("menu-level-3")&&(body.classList.remove("menu-level-3"),body.classList.add("menu-level-2"))}))})),newsletterNavItems.forEach((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget.dataset.name;body.classList.remove("menu-level-2"),body.classList.add("menu-level-3"),megaMenuMains.forEach((function(e,n,a){e.classList.contains(t)&&(a.forEach((function(e){return e.classList.remove("active")})),e.classList.add("active"),e.parentElement.dataset.active=t)}))}))})),hamburger.addEventListener("click",(function(e){body.classList.toggle("mobile-nav-is-open"),body.classList.contains("mobile-nav-is-open")?bodyScrollLock.disableBodyScroll(mobileNavWrapper):bodyScrollLock.enableBodyScroll(mobileNavWrapper)}));var mq=window.matchMedia("(min-width: 992px)");mq.addListener(normalize),headerCTA.addEventListener("click",(function(e){e.preventDefault(),header.classList.add("form-active")})),megaMenuTabs.length>0&&megaMenuTabs.forEach((function(e,t,n){return e.addEventListener("mouseenter",(function(){n.forEach((function(e){return e.classList.remove("active")})),e.classList.add("active");var t=e.dataset.tab;megaMenuMains.forEach((function(e){e.classList.remove("active"),e.classList.contains(t)&&(e.classList.add("active"),e.parentElement.dataset.active=t)}))}))}))}function getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var subForms=document.querySelectorAll("#subForm");if(subForms){var utmSource=getUrlParameter("utm_source"),utmCampaign=getUrlParameter("utm_campaign"),referrer=""==document.referrer?"Direct":document.referrer;subForms.forEach((function(e){e.querySelector("input[name=cm-f-yhhllyd]").value=utmSource,e.querySelector("input[name=cm-f-ykqhyi]").value=utmCampaign,e.querySelector("input[name=cm-f-ykfdjl]").value=referrer}))}