/*! donut-website v0.0.1 | (c) 2020  | MIT License | http://link-to-your-git-repo.com */
const formSubmit=document.querySelector("#ambassador-signup-form button"),formInput=document.querySelector('#ambassador-signup-form input[name="email"]'),validationMessage=document.querySelector(".validation-message");function getSubscriber(e){let t;const a=new FormData;a.append("email",e);const o={async:!0,crossDomain:!0,url:"http://localhost:3000/php/campaignmonitor-createsend-php-v6.0.1/requests/get.php",method:"POST",processData:!1,contentType:!1,mimeType:"multipart/form-data",data:a};return jQuery.ajax(o).done((function(e){1==(e=JSON.parse(e)).Code?(t=!1,console.log("User not found")):(t=!0,console.log("User Found!")),console.log(e)})),t}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}formSubmit.addEventListener("click",(function(e){e.preventDefault();const t=formInput.value;if(validateEmail(t)){"block"==validationMessage.style.display&&(validationMessage.style.display="none");const e=getSubscriber(t);campaign.user&&campaign.logout(),campaign.identify({email:t},(function(){window.location.href=!0===e?"http://localhost:3000/ambassadors-refer-a-friend.html":"http://localhost:3000/welcome.html"}))}else validationMessage.style.display="block"}));